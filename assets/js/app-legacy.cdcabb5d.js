(function(e){function t(t){for(var r,i,o=t[0],c=t[1],u=t[2],d=0,f=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},s=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/ChelovekGleb-ContestHelpers/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;s.push([1,"chunk-vendors"]),n()})({0:function(e,t){},"057f":function(e,t,n){e.exports={container:"content_container_2XZVx",component:"content_component_1QkIJ"}},1:function(e,t,n){e.exports=n("56d7")},"1f8b":function(e,t,n){e.exports=n.p+"assets/media/notification.0e4a8318.ogg"},2:function(e,t){},2378:function(e,t,n){e.exports={container:"animatedBackgroundOption_container_j2KQV",checkbox:"animatedBackgroundOption_checkbox_21o25"}},2779:function(e,t,n){"use strict";var r=n("2378"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},"2b41":function(e,t,n){e.exports={container:"index_container_JqJLS",resultContainer:"index_resultContainer_1wpxd",blackListContainer:"index_blackListContainer_QNby9",controlContainer:"index_controlContainer_10aQP",buttons:"index_buttons_jqLSR",filters:"index_filters_O5lwz",textarea:"index_textarea_2GJUi"}},"31cd":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.container},[n("div",{class:e.$style.stateContainer},[n("div",{domProps:{textContent:e._s("Логин:")}}),e.login&&"ok"===e.authState?n("div",{class:e.$style.login,domProps:{textContent:e._s(e.login)}}):n("div",{class:[e.$style.stateIcon,e.$style[e.authState]]}),e.errorMsg?[n("div",{domProps:{textContent:e._s("Ошибка:")}}),n("div",{domProps:{textContent:e._s(e.errorMsg)}})]:e._e()],2),n("div",{class:e.$style.buttonsContainer},[e.$store.state.isAuthenticated?n("gButton",{attrs:{caption:"Отозвать токен",title:"Разлогиниться и сделать токен недействительным"},on:{click:e.revokeToken}}):n("gButton",{attrs:{caption:"Авторизоваться",title:"Открыть страницу авторизации Twitch"},on:{click:e.doAuth}}),n("CopyButton",{attrs:{caption:"Копировать токен",disabled:!e.$store.state.isAuthenticated,target:e.generateTokenInputNode,title:"Для отладочных целей"}})],1),n("input",{ref:"tokenInput",class:e.$style.tokenInput})])},a=[],s=(n("7f7f"),n("96cf"),n("3b8d")),i=n("a79e"),o={components:{gButton:function(){return Promise.resolve().then(n.bind(null,"32d9"))},CopyButton:function(){return Promise.resolve().then(n.bind(null,"f09b"))}},data:function(){return{authState:"noAuth",login:"",errorMsg:"",twitch:null}},mounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("getTwitchController");case 2:if(t=e.sent,this.twitch=t,t.user.token){e.next=7;break}return this.authState="noAuth",e.abrupt("return");case 7:return this.authState="waiting",e.next=10,t.checkToken();case 10:t.user.ok?(this.authState="ok",this.login=t.user.name,this.$store.state.isAuthenticated=!0):(this.authState="error",this.errorMsg=t.user.errorMsg,this.$store.state.isAuthenticated=!1,delete i["a"].token);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{doAuth:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.twitch.auth({scope:["channel:read:redemptions","channel:read:subscriptions","channel:manage:redemptions","chat:read","chat:edit"]});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),generateTokenInputNode:function(){var e=this.$refs.tokenInput;return e.value=i["a"].token,setTimeout((function(){e.value=""}),1e3),e},revokeToken:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.twitch.revokeToken(),this.authState="noAuth",this.login="",this.$store.state.isAuthenticated=!1,delete i["a"].token;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},c=o,u=n("b3f4"),l=n("2877");function d(e){this["$style"]=u["default"].locals||u["default"]}var f=Object(l["a"])(c,r,a,!1,d,null,null);t["default"]=f.exports},"32d9":function(e,t,n){"use strict";n.r(t);var r=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("button",t._g(t._b({class:[t.$style.container,(e={},e[t.$style.nowrap]=t.nowrap,e[t.$style.active]=t.active,e[t.$style.compact]=t.compact,e)]},"button",t.$attrs,!1),t.$listeners),[t._v(" "+t._s(t.caption)+" ")])},a=[],s={props:{caption:{type:String,default:null},nowrap:{type:Boolean,default:null},active:{type:Boolean,default:null},compact:{type:Boolean,default:null}}},i=s,o=n("3c21"),c=n("2877");function u(e){this["$style"]=o["default"].locals||o["default"]}var l=Object(c["a"])(i,r,a,!1,u,null,null);t["default"]=l.exports},3307:function(e,t,n){e.exports={container:"gButton_container_38-OD",active:"gButton_active_3VvNt",nowrap:"gButton_nowrap_3oxt5",compact:"gButton_compact_19iN5"}},3612:function(e,t,n){e.exports={container:"index_container_1ctnu",stateContainer:"index_stateContainer_Kdhrh",login:"index_login_2dweu",buttonsContainer:"index_buttonsContainer_1mwlu",tokenInput:"index_tokenInput_3h3Zc",stateIcon:"index_stateIcon_AkqWm",noAuth:"index_noAuth_3y-tk",waiting:"index_waiting_26PqX",error:"index_error_3o6D0"}},"3c21":function(e,t,n){"use strict";var r=n("3307"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},"3e54":function(e,t,n){var r={"./auth/index.vue":"31cd","./chat/index.vue":"d8de","./randomizer/index.vue":"4ab5","./rewards/index.vue":"8605","./subs/index.vue":"5085"};function a(e){return Promise.resolve().then((function(){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var a=r[e];return n(a)}))}a.keys=function(){return Object.keys(r)},a.id="3e54",e.exports=a},"4ab5":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.container},[n("iframe",{class:e.$style.iframe,attrs:{src:e.url}})])},a=[],s={data:function(){return{url:"https://randomus.ru/list"}}},i=s,o=n("b6b3"),c=n("2877");function u(e){this["$style"]=o["default"].locals||o["default"]}var l=Object(c["a"])(i,r,a,!1,u,null,null);t["default"]=l.exports},5085:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.container},[n("gContainer",{class:e.$style.resultContainer,attrs:{caption:e.subsCount?"Результат ("+e.subsCount+" шт.)":"Результат"}},[n("gTextarea",{ref:"result",class:e.$style.textarea,attrs:{placeholder:"[ пусто ]",transparent:"",disabled:""},model:{value:e.input.result,callback:function(t){e.$set(e.input,"result",t)},expression:"input.result"}})],1),n("gContainer",{class:e.$style.blackListContainer,attrs:{caption:"Чёрный список"}},[n("gTextarea",{class:e.$style.textarea,attrs:{placeholder:"Список имён, которые будут исключены из результата",transparent:""},on:{input:e.onBlacklistEdit},model:{value:e.input.blacklist,callback:function(t){e.$set(e.input,"blacklist",t)},expression:"input.blacklist"}})],1),n("div",{class:e.$style.controlContainer},[n("div",{class:e.$style.buttons},[n("gButton",{class:e.$style.refreshSubsBtn,attrs:{caption:"Обновить"},on:{click:e.getSubs}}),n("CopyButton",{class:e.$style.copyBtn,attrs:{target:function(){return e.$refs.result}}})],1),n("div",{class:e.$style.filters},[n("gToggler",{attrs:{caption:"Tier 1"},on:{click:e.processResult},model:{value:e.conf.tier1,callback:function(t){e.$set(e.conf,"tier1",t)},expression:"conf.tier1"}}),n("gToggler",{attrs:{caption:"Tier 2"},on:{click:e.processResult},model:{value:e.conf.tier2,callback:function(t){e.$set(e.conf,"tier2",t)},expression:"conf.tier2"}}),n("gToggler",{attrs:{caption:"Tier 3"},on:{click:e.processResult},model:{value:e.conf.tier3,callback:function(t){e.$set(e.conf,"tier3",t)},expression:"conf.tier3"}})],1)])],1)},a=[],s=(n("ac6a"),n("5df3"),n("4f7f"),n("75fc")),i=(n("7f7f"),n("6762"),n("2fdb"),n("d25f"),n("6d67"),n("55dd"),n("28a5"),n("96cf"),n("3b8d")),o=n("a79e"),c=(n("a481"),function(e,t){var n=String.fromCharCode(1110),r=e.toLowerCase().replace(/ё/g,"е".concat(n)),a=t.toLowerCase().replace(/ё/g,"е".concat(n));return r>a?1:r<a?-1:0}),u={components:{CopyButton:function(){return Promise.resolve().then(n.bind(null,"f09b"))},gButton:function(){return Promise.resolve().then(n.bind(null,"32d9"))},gContainer:function(){return Promise.resolve().then(n.bind(null,"de27"))},gTextarea:function(){return Promise.resolve().then(n.bind(null,"b8aa"))},gToggler:function(){return Promise.resolve().then(n.bind(null,"5250"))}},data:function(){return{input:{blacklist:"",result:""},conf:{tier1:!0,tier2:!0,tier3:!0},subsRaw:null,subsCount:null,twitch:null}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("getTwitchController");case 2:return t=e.sent,this.twitch=t,this.input.blacklist=o["a"].subs_blacklist||"",e.next=7,this.getSubs();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getSubs:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.input.result="( Получаю список подписчиков... )",this.subsCount=null,e.next=5,this.twitch.api("subscriptions",{query:{first:100,broadcaster_id:this.twitch.user.id}});case 5:if(t=e.sent,t.ok){e.next=10;break}return this.input.result="Что-то пошло не так при обращении к API:\n\n".concat(t.err),this.$set(this,"subsRaw",{}),e.abrupt("return");case 10:this.$set(this,"subsRaw",t.data),this.processResult(),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),this.input.result="Что-то пошло не так при обработке запроса:\n\n".concat(e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}(),onBlacklistEdit:function(e){o["a"].subs_blacklist=e,this.processResult()},processResult:function(){var e=this,t=this.input.blacklist?this.input.blacklist.split("\n"):[],n=this.subsRaw.filter((function(n){var r="1000"===n.tier,a="2000"===n.tier,s="3000"===n.tier,i=t.includes(n.user_name),o=n.user_name===e.twitch.user.name,c=!0;return r&&(c=c&&e.conf.tier1),a&&(c=c&&e.conf.tier2),s&&(c=c&&e.conf.tier3),i&&(c=!1),o&&(c=!1),c})).map((function(e){return e.user_name})).sort(c);n=Object(s["a"])(new Set(n)),this.input.result=n.join("\n"),this.subsCount=n.length}}},l=u,d=n("f913"),f=n("2877");function p(e){this["$style"]=d["default"].locals||d["default"]}var h=Object(f["a"])(l,r,a,!1,p,null,null);t["default"]=h.exports},5250:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gButton",{attrs:{caption:e.buttonCaption,nowrap:"",compact:e.compact},on:{click:e.onClick}})},a=[],s={components:{gButton:function(){return Promise.resolve().then(n.bind(null,"32d9"))}},props:{caption:{type:String,default:null},value:{type:Boolean,requred:!0},compact:{type:Boolean,default:null}},data:function(){return{mark:"[×]",blank:"[ ]"}},computed:{buttonCaption:function(){return this.value?"".concat(this.mark," ").concat(this.caption):"".concat(this.blank," ").concat(this.caption)}},methods:{onClick:function(){var e;(this.$emit("input",!this.value),this.$listeners.click)&&(e=this.$listeners).click.apply(e,arguments)}}},i=s,o=n("2877"),c=Object(o["a"])(i,r,a,!1,null,null,null);t["default"]=c.exports},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var r=n("3b8d"),a=(n("cadf"),n("551c"),n("f751"),n("097d"),n("ed18")),s=n.n(a),i=n("2b0e"),o=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:(e={},e[t.$style.animatedBackground]=t.isBackgroundAnimated,e),attrs:{id:t.$style.app}},[r("Header"),r("Content"),t.showFooter?r("Footer"):t._e()],1)},c=[],u={components:{Header:function(){return Promise.resolve().then(n.bind(null,"f613"))},Content:function(){return Promise.resolve().then(n.bind(null,"d903"))},Footer:function(){return Promise.resolve().then(n.bind(null,"d4c6"))}},computed:{isBackgroundAnimated:function(){return this.$store.state.isBackgroundAnimated},showFooter:function(){return"auth"===this.$store.state.currentTab}},watch:{isBackgroundAnimated:{immediate:!0,handler:function(e){var t=this.$style.animatedBackground;e?document.body.classList.add(t):document.body.classList.remove(t)}}}},l=u,d=n("e24a"),f=n("2877");function p(e){this["$style"]=d["default"].locals||d["default"]}var h=Object(f["a"])(l,o,c,!1,p,null,null),m=h.exports,v=n("768b"),g=(n("ac4d"),n("8a81"),n("28a5"),n("ac6a"),n("1c01"),n("58b2"),n("8e6e"),n("f3e2"),n("d25f"),n("456d"),n("6b54"),n("87b3"),n("75fc")),b=n("bd86"),y=n("d225"),x=n("b0b4");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(b["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){return new Promise((function(t){return setTimeout(t,e)}))}var C=function(){function e(t){var n=t.clientId,r=t.token;Object(y["a"])(this,e),this.clientId=n,this.user={ok:!1,id:null,name:null,token:r,expiresIn:null,errorMsg:null}}return Object(x["a"])(e,[{key:"api",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,c,u,l,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=d.length>1&&void 0!==d[1]?d[1]:{},r=!1,a=null,s={ok:!1,data:[]},console.log("[API] [%s]\n===> %o",t,n);case 5:return i={},a&&(i.after=a),n.query&&(i=k({},i,{},n.query)),o=k({},n,{query:i}),n.body&&(o.body=n.body),console.log("[API] [%s]\n--\x3e %o",t,o),e.next=13,this._api(t,o);case 13:return c=e.sent,e.next=16,_(250);case 16:console.log("[API] [%s]\n<-- %o",t,c),c.ok?(l=!(c.res.pagination&&c.res.pagination.cursor),(u=s.data).push.apply(u,Object(g["a"])(c.res.data)),l?(r=!0,s.ok=!0):a=c.res.pagination.cursor):(r=!0,s=c);case 18:if(!r){e.next=5;break}case 19:return console.log("[API] [%s]\n<=== %o",t,s),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_api",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,c,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r={method:n.method||"GET",headers:{authorization:"Bearer ".concat(this.user.token),"client-id":this.clientId}},n.method||"GET",a="https://api.twitch.tv/helix/".concat(t,"/"),n.query&&(i=new URLSearchParams(n.query).toString(),a+="?".concat(i)),n.headers&&(r.headers=k({},r.headers,{},n.headers)),n.body&&(r.headers["Content-Type"]="application/json",r.body=JSON.stringify(n.body)),e.prev=7,e.next=10,fetch(a,r);case 10:return o=e.sent,e.next=13,o.json();case 13:if(c=e.sent,o.ok){e.next=16;break}throw new Error(JSON.stringify(c,null,2));case 16:s={ok:!0,res:c},e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](7),s={ok:!1,err:e.t0.message};case 22:return e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this,[[7,19]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkToken",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.user.token,e.prev=1,e.next=4,fetch("https://id.twitch.tv/oauth2/validate",{headers:{authorization:"Bearer ".concat(t)}});case 4:return r=e.sent,e.next=7,r.json();case 7:if(n=e.sent,r.ok){e.next=10;break}throw new Error(n.message);case 10:this.user={ok:!0,id:n.user_id,name:n.login,token:t,expiresIn:n.expires_in,errorMsg:null},e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),this.user={ok:!1,id:null,name:null,token:null,expiresIn:null,errorMsg:e.t0.message};case 16:return console.log("[API] [validate]\n %o",{raw:n,parsed:this.user}),e.abrupt("return",this.user.ok);case 18:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"auth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scope,n=e.inNewWindow;if(!t)throw new Error('"scope" is missing!');var r=new URLSearchParams({client_id:this.clientId,response_type:"token",redirect_uri:location.origin+location.pathname,scope:t.join(" ")}).toString(),a="https://id.twitch.tv/oauth2/authorize?".concat(r);n?window.open(a,"_blank"):location.href=a}},{key:"revokeToken",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new URLSearchParams({client_id:this.clientId,token:this.user.token}).toString(),e.next=3,fetch("https://id.twitch.tv/oauth2/revoke?".concat(t),{method:"POST"});case 3:if(n=e.sent,console.log("resp",n),n.ok){e.next=8;break}return alert("Не удалось отозвать токен"),e.abrupt("return",!1);case 8:return this.user={ok:!1,id:null,name:null,token:null,expiresIn:null,errorMsg:null},e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),$=n("a79e"),T="75rb88i37m9kha2q2toaha4g82zn8h";function S(e){var t={},n=!0,r=!1,a=void 0;try{for(var s,i=e.slice(1).split("&")[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var o=s.value,c=o.split("="),u=Object(v["a"])(c,2),l=u[0],d=u[1];t[l]=decodeURIComponent(d)}}catch(f){r=!0,a=f}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}function R(){return O.apply(this,arguments)}function O(){return O=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},n=t.access_token||$["a"].token,r=new C({clientId:T,token:n}),t.access_token&&($["a"].token=n),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}var A=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=location.hash,n=t?S(t):{},e.next=4,R(n);case 4:return r=e.sent,location.hash&&window.history.replaceState(null,"",location.pathname),e.abrupt("return",{hash:n,twitchController:r});case 7:case"end":return e.stop()}}),e)}))),B=n("2f62"),P=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.initialData,i["a"].use(B["a"]),r=n.twitchController,a=new B["a"].Store({state:{isAuthenticated:!1,isBackgroundAnimated:!0,currentTab:"auth"},actions:{getTwitchController:function(e){return r},selectTab:function(e,t){e.state.currentTab=t}}}),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i["a"].config.productionTip=!1,s.a.config();var j=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return t=e.sent,e.next=5,P({initialData:t});case 5:n=e.sent,new i["a"]({store:n,render:function(e){return e(m)}}).$mount("#app");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();j().catch((function(e){return console.error("Failed to init app:",e)}))},"62fb":function(e,t,n){"use strict";var r=n("a0be"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},8605:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.container},[n("gContainer",{class:e.$style.resultContainer,attrs:{caption:e.rewardRedemptionsCount?"Результат ("+e.rewardRedemptionsCount+" шт.)":"Результат"}},[n("gTextarea",{ref:"result",class:e.$style.textarea,attrs:{placeholder:"[ пусто ]",transparent:"",disabled:""},model:{value:e.input.result,callback:function(t){e.$set(e.input,"result",t)},expression:"input.result"}})],1),n("div",{class:e.$style.controlContainer},[n("div",{class:e.$style.buttons},[n("gButton",{attrs:{caption:"Обновить"},on:{click:e.getAll}}),n("CopyButton",{class:e.$style.copyBtn,attrs:{target:function(){return e.$refs.result}}})],1),n("div",{class:e.$style.filters},[n("gToggler",{attrs:{caption:"Без повторений",title:"Исключить повторяющиеся имена"},on:{click:e.processResult},model:{value:e.filters.onlyUniqueNames,callback:function(t){e.$set(e.filters,"onlyUniqueNames",t)},expression:"filters.onlyUniqueNames"}}),n("gToggler",{attrs:{caption:"Запросить выполненные",title:"Запросить награды, которые отмечены как выполненные"},on:{click:e.getAll},model:{value:e.filters.requireFulfilled,callback:function(t){e.$set(e.filters,"requireFulfilled",t)},expression:"filters.requireFulfilled"}}),e.hasRewards?e._l(e.rewards,(function(t,r){return n("gToggler",{key:r,attrs:{caption:t.title,title:t.prompt},on:{click:e.processResult},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"reward.enabled"}})})):e._e(),n("gButton",{class:e.$style.addRewardBtn,attrs:{caption:"Создать награду",title:"Создать новую награду, к которой приложение будет иметь доступ",nowrap:""},on:{click:e.createReward}})],2)])],1)},a=[],s=(n("57e7"),n("6762"),n("2fdb"),n("75fc")),i=(n("d25f"),n("ac4d"),n("8a81"),n("ac6a"),n("6d67"),n("96cf"),n("3b8d")),o={components:{CopyButton:function(){return Promise.resolve().then(n.bind(null,"f09b"))},gButton:function(){return Promise.resolve().then(n.bind(null,"32d9"))},gContainer:function(){return Promise.resolve().then(n.bind(null,"de27"))},gTextarea:function(){return Promise.resolve().then(n.bind(null,"b8aa"))},gToggler:function(){return Promise.resolve().then(n.bind(null,"5250"))}},data:function(){return{input:{result:""},filters:{onlyUniqueNames:!1,requireFulfilled:!1},rewards:[],rewardRedemptions:[],rewardRedemptionsCount:null,twitch:null}},computed:{hasRewards:function(){return!!this.rewards.length}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("getTwitchController");case 2:return t=e.sent,this.twitch=t,e.next=6,this.getAll();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{getAll:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.rewardRedemptionsCount=null,e.next=3,this.getRewards();case 3:return e.next=5,this.getRewardRedemptions();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createReward:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=prompt("Из-за ограничений Twitch API приложение может иметь доступ только к собственным наградам.\n\nСозданные награды можно активировать, редактировать или удалить в панели управления канала.\n\nВведите название новой награды:"),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.twitch.api("channel_points/custom_rewards",{method:"POST",query:{broadcaster_id:this.twitch.user.id},body:{title:t,prompt:"(создано через приложение инструментов для конкурса)",cost:100,is_enabled:!1}});case 5:if(n=e.sent,n.ok){e.next=9;break}return this.input.result="Что-то пошло не так при обращении к API:\n\n".concat(n.err),e.abrupt("return");case 9:return e.next=11,this.getRewards();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRewards:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="( Награда неактивна. Включть её можно в настройках Twitch )",e.prev=1,n=this.input.result,this.input.result="( Получаю список наград... )",this.$set(this,"rewards",[]),e.next=7,this.twitch.api("channel_points/custom_rewards",{query:{broadcaster_id:this.twitch.user.id,only_manageable_rewards:!0}});case 7:if(r=e.sent,r.ok){e.next=11;break}return this.input.result="Что-то пошло не так при обращении к API:\n\n".concat(r.err),e.abrupt("return");case 11:a=r.data.map((function(e){return{id:e.id,title:e.is_enabled?e.title:"".concat(e.title," (неактивна)"),prompt:e.is_enabled?e.prompt:"".concat(t,"\n\n").concat(e.prompt),enabled:e.is_enabled}})),this.$set(this,"rewards",a),n&&(this.input.result=n),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](1),this.input.result="Что-то пошло не так при обработке запроса:\n\n".concat(e.t0.message);case 19:case"end":return e.stop()}}),e,this,[[1,16]])})));function t(){return e.apply(this,arguments)}return t}(),getRewardRedemptions:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,this.input.result="( Получаю список запросов на награды... )",this.rewardRedemptionsCount=null,this.$set(this,"rewardRedemptions",[]),t=!0,n=!1,r=void 0,e.prev=7,a=this.rewards[Symbol.iterator]();case 9:if(t=(i=a.next()).done){e.next=23;break}return c=i.value,e.next=13,this.twitch.api("channel_points/custom_rewards/redemptions",{query:{first:50,broadcaster_id:this.twitch.user.id,reward_id:c.id,status:this.filter.requireFulfilled?"FULFILLED":"UNFULFILLED",sort:"NEWEST"}});case 13:if(u=e.sent,u.ok){e.next=17;break}return this.input.result="Что-то пошло не так при обращении к API:\n\n".concat(u.err),e.abrupt("return");case 17:l=u.data.map((function(e){return{id:e.id,rewardId:e.reward.id,userName:e.user_name,userInput:e.user_input,status:e.status,timestamp:e.redeemed_at,date:new Date(e.redeemed_at)}})),this.filter.requireFulfilled&&function(){var e=864e5,t=(new Date).valueOf()-e;l=l.filter((function(e){return e.timestamp<t}))}(),(o=this.rewardRedemptions).push.apply(o,Object(s["a"])(l));case 20:t=!0,e.next=9;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](7),n=!0,r=e.t0;case 29:e.prev=29,e.prev=30,t||null==a.return||a.return();case 32:if(e.prev=32,!n){e.next=35;break}throw r;case 35:return e.finish(32);case 36:return e.finish(29);case 37:this.processResult(),e.next=43;break;case 40:e.prev=40,e.t1=e["catch"](0),this.input.result="Что-то пошло не так при обработке запроса:\n\n".concat(e.t1.message);case 43:case"end":return e.stop()}}),e,this,[[0,40],[7,25,29,37],[30,,32,36]])})));function t(){return e.apply(this,arguments)}return t}(),processResult:function(){var e=this.rewards.filter((function(e){return e.enabled})).map((function(e){return e.id})),t=this.rewardRedemptions;t=t.filter((function(t,n,r){var a=e.includes(t.rewardId),s=a;return s})).map((function(e){return e.userName})),this.filters.onlyUniqueNames&&(t=t.filter((function(e,t,n){return n.indexOf(e)===t}))),this.input.result=t.join("\n"),this.rewardRedemptionsCount=t.length}}},c=o,u=n("e098"),l=n("2877");function d(e){this["$style"]=u["default"].locals||u["default"]}var f=Object(l["a"])(c,r,a,!1,d,null,null);t["default"]=f.exports},"87e0":function(e,t,n){"use strict";var r=n("057f"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},8987:function(e,t,n){e.exports={animatedBackground:"App_animatedBackground_Bi1nn",background:"App_background_1pY6v",app:"App_app_3cl75"}},"8ed5":function(e,t,n){"use strict";var r=n("dd69"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},9505:function(e,t,n){e.exports={container:"index_container_2SQMD",iframe:"index_iframe_3Zge-"}},"955a":function(e,t,n){e.exports={container:"index_container_3r6t6",resultContainer:"index_resultContainer_30vPi",blackListContainer:"index_blackListContainer_3eMwc",controlContainer:"index_controlContainer_33d79",buttons:"index_buttons_2H3K_",filters:"index_filters_22i3g",textarea:"index_textarea_19J-h"}},"99dd":function(e,t,n){e.exports=n.p+"assets/img/favicon.30c7fef6.png"},a0be:function(e,t,n){e.exports={container:"gContainer_container_3h8Ox",caption:"gContainer_caption_dsJxw",hasCloseButton:"gContainer_hasCloseButton_38Da5",closeBtn:"gContainer_closeBtn_3PT8n",content:"gContainer_content_1lTim"}},a11e:function(e,t,n){var r={"./auth/index.vue":"31cd","./chat/index.vue":"d8de","./randomizer/index.vue":"4ab5","./rewards/index.vue":"8605","./subs/index.vue":"5085"};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id="a11e"},a398:function(e,t,n){"use strict";var r=n("b332"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},a5ae:function(e,t,n){"use strict";var r=n("dc8c"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},a79e:function(e,t,n){"use strict";var r=new Proxy({},{get:function(e,t){var n=JSON.parse(localStorage.getItem(t));return n},set:function(e,t,n){return localStorage.setItem(t,JSON.stringify(n)),!0},deleteProperty:function(e,t){return localStorage.removeItem(t),!0}});t["a"]=r},a9b0:function(e,t,n){e.exports={container:"gTextarea_container_1dWIn",transparent:"gTextarea_transparent_DR2jy"}},b332:function(e,t,n){e.exports={container:"footer_container_8FSkW",aboutLink:"footer_aboutLink_2IyZ9"}},b3f4:function(e,t,n){"use strict";var r=n("3612"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},b6b3:function(e,t,n){"use strict";var r=n("9505"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},b8aa:function(e,t,n){"use strict";n.r(t);var r=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],class:[t.$style.container,(e={},e[t.$style.transparent]=t.transparent,e)],attrs:{spellcheck:"false"},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},function(e){return t.$emit("input",t.value)}]}})},a=[],s={props:{value:{type:String,default:null},transparent:{type:Boolean,default:!1}}},i=s,o=n("d021"),c=n("2877");function u(e){this["$style"]=o["default"].locals||o["default"]}var l=Object(c["a"])(i,r,a,!1,u,null,null);t["default"]=l.exports},d021:function(e,t,n){"use strict";var r=n("a9b0"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},d4c6:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.container},[n("AnimatedBackgroundOption",{model:{value:e.isBackgroundAnimated,callback:function(t){e.isBackgroundAnimated=t},expression:"isBackgroundAnimated"}}),n("div"),n("div",[e._v(" "+e._s(e.version)+" :: "+e._s(e.lastUpdate)+" :: Специально для "),n("a",{class:e.$style.aboutLink,attrs:{target:"_blank",href:"https://www.twitch.tv/chelovekgleb"},domProps:{textContent:e._s("@chelovekgleb")}})])],1)},a=[],s={components:{AnimatedBackgroundOption:function(){return Promise.resolve().then(n.bind(null,"f663"))}},data:function(){return{version:"v2.3.0",lastUpdate:"16.10.2021"}},computed:{isBackgroundAnimated:{get:function(){return this.$store.state.isBackgroundAnimated},set:function(e){this.$store.state.isBackgroundAnimated=e}}}},i=s,o=n("a398"),c=n("2877");function u(e){this["$style"]=o["default"].locals||o["default"]}var l=Object(c["a"])(i,r,a,!1,u,null,null);t["default"]=l.exports},d8de:function(e,t,n){"use strict";n.r(t);var r=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",{class:t.$style.container},[r("div",{class:[t.$style.mainContainer,(e={},e[t.$style.hasResult]=t.hasResult,e)]},[r("gContainer",{ref:"messagesContainer",attrs:{"inner-class":t.$style.messagesContainer,caption:"Чат"}},t._l(t.messages,(function(e,n){var a;return r("div",{key:n,class:[t.$style.message,(a={},a[t.$style.systemMessage]=e.isSystemMessage,a[t.$style.highlight]=e.isHighlighed,a)]},[e.isSystemMessage?[r("span",{class:t.$style.text,style:{"--color":e.color},domProps:{textContent:t._s(e.textProcessed)}})]:[r("span",{class:t.$style.user,style:{"--color":e.user.color},domProps:{textContent:t._s(e.user.name)}}),r("span",{class:t.$style.text,style:{"--color":e.color},domProps:{innerHTML:t._s(e.textProcessed)}})]],2)})),0),t.hasResult?r("gContainer",{attrs:{"inner-class":t.$style.messagesContainer,caption:"Найденные сообщения","can-be-closed":""},on:{onClose:t.onResultClose}},t._l(t.resultMessages,(function(e,n){return r("div",{key:n,class:t.$style.message},[r("span",{class:t.$style.time,domProps:{textContent:t._s(e.timestamp.timeWithSeconds)}}),r("span",{class:t.$style.user,style:{"--color":e.user.color},domProps:{textContent:t._s(e.user.name)}}),r("span",{class:t.$style.text,style:{"--color":e.color},domProps:{innerHTML:t._s(e.textProcessed)}})])})),0):t._e()],1),r("div",{class:t.$style.sidebarContainer},[r("gContainer",{attrs:{"inner-class":t.$style.searchContainer,caption:"Искать по шаблону"}},[r("gTextarea",{class:t.$style.input,attrs:{rows:"1",placeholder:"Что искать",title:"Если в качестве поиска указана строка «АБВ», то с настройками по умолчанию может быть найдено как сообщение «АБВ», так и «а б в г д»"},model:{value:t.input.confSearchQuery,callback:function(e){t.$set(t.input,"confSearchQuery",e)},expression:"input.confSearchQuery"}}),r("div",{class:t.$style.buttonsWrapper},[r("gToggler",{attrs:{caption:"Учитывать регистр",title:"Если отмечено, сообщения «АБВ» и «абв» будут считаться разными сообщениями",compact:""},on:{click:function(e){return t.saveValueToLs("chat_search.considerCase",t.conf.search.considerCase)}},model:{value:t.conf.search.considerCase,callback:function(e){t.$set(t.conf.search,"considerCase",e)},expression:"conf.search.considerCase"}}),r("gToggler",{attrs:{caption:"Учитывать пробелы",title:"Если отмечено, сообщения «АБВ» и «А Б В» будут считаться разными сообщениями",compact:""},on:{click:function(e){return t.saveValueToLs("chat_search.considerSpaces",t.conf.search.considerSpaces)}},model:{value:t.conf.search.considerSpaces,callback:function(e){t.$set(t.conf.search,"considerSpaces",e)},expression:"conf.search.considerSpaces"}}),r("gToggler",{attrs:{caption:"Сообщение целиком",title:"Если отмечено, сообщения «АБВ» и «АБВГД» будут считаться разными сообщениями",compact:""},on:{click:function(e){return t.saveValueToLs("chat_search.onlyEntireMessage",t.conf.search.onlyEntireMessage)}},model:{value:t.conf.search.onlyEntireMessage,callback:function(e){t.$set(t.conf.search,"onlyEntireMessage",e)},expression:"conf.search.onlyEntireMessage"}})],1)],1),r("gContainer",{attrs:{"inner-class":t.$style.confFoundContainer,caption:"Когда сообщение найдено"}},[r("gTextarea",{class:t.$style.input,attrs:{rows:"1",placeholder:t.defaultValues.successNotificationTemplate,title:"Текст, который будет отображён, когда сообщение найдено.\n\nСимвол «@» будет заменён на ник.\nСимвол «*» будет заменён на текст сообщения.\nСимвол «&» будет заменён на введённый текст."},on:{input:function(e){return t.saveValueToLs("chat_found.successNotificationTemplate",t.input.successNotificationTemplate)}},model:{value:t.input.successNotificationTemplate,callback:function(e){t.$set(t.input,"successNotificationTemplate",e)},expression:"input.successNotificationTemplate"}}),r("div",{class:t.$style.buttonsWrapper},[r("gToggler",{attrs:{caption:"     Звук      ",title:"Будет проигран звуковой сигнал",compact:""},on:{click:function(e){return t.saveValueToLs("chat_found.playSound",t.conf.found.playSound)}},model:{value:t.conf.found.playSound,callback:function(e){t.$set(t.conf.found,"playSound",e)},expression:"conf.found.playSound"}}),r("gToggler",{attrs:{caption:"  Уведомление  ",title:"Будет показано уведомление браузера",compact:""},on:{click:t.verifyNotificationPermission},model:{value:t.conf.found.showNotification,callback:function(e){t.$set(t.conf.found,"showNotification",e)},expression:"conf.found.showNotification"}}),r("gToggler",{attrs:{caption:"Сообщение в чат",title:"Будет отправлено сообщение в чат на twitch",compact:""},on:{click:function(e){return t.saveValueToLs("chat_found.sendToChat",t.conf.found.sendToChat)}},model:{value:t.conf.found.sendToChat,callback:function(e){t.$set(t.conf.found,"sendToChat",e)},expression:"conf.found.sendToChat"}}),r("gButton",{attrs:{caption:t.timeoutButtonCaption,title:"После найденного сообщения поиск отключится на N секунд",compact:""},on:{click:t.setNextTimeoutValue}}),r("br"),r("gButton",{attrs:{caption:"Проверить",compact:""},on:{click:t.createFakeSuccessfulMessage}})],1)],1)],1)])},a=[],s=(n("28a5"),n("768b")),i=(n("ffc1"),n("3b2b"),n("ac4d"),n("8a81"),n("6762"),n("2fdb"),n("a481"),n("6b54"),n("87b3"),n("f576"),n("7f7f"),n("ac6a"),n("20d6"),n("386d"),n("96cf"),n("3b8d")),o=(n("c5f6"),n("7cdf"),n("a79e")),c=n("3cba"),u=n.n(c),l={components:{gButton:function(){return Promise.resolve().then(n.bind(null,"32d9"))},gContainer:function(){return Promise.resolve().then(n.bind(null,"de27"))},gTextarea:function(){return Promise.resolve().then(n.bind(null,"b8aa"))},gToggler:function(){return Promise.resolve().then(n.bind(null,"5250"))}},data:function(){return{messages:[],resultMessages:[],input:{confSearchQuery:"",successNotificationTemplate:"",timeout:0},conf:{search:{considerCase:null,considerSpaces:null,onlyEntireMessage:null},found:{playSound:null,showNotification:null,sendToChat:null}},twitch:null,chatClient:null,maxMessagesCount:150,bttvCache:null,timeout:{values:[0,5,30],isActive:null,timer:null},defaultValues:{usernameColors:["#ff0000","#0000ff","#008000","#b22222","#ff7f50","#9acd32","#ff4500","#2e8b57","#daa520","#d2691e","#5f9ea0","#1e90ff","#ff69b4","#8a2be2","#00ff7f"],successNotificationTemplate:"/me @ дал правильный ответ (*)!",notificationSound:n("1f8b"),notificationIcon:n("99dd")}}},computed:{hasResult:function(){return this.resultMessages&&this.resultMessages.length},timeoutButtonCaption:function(){var e=this.input.timeout,t=0===e,n=Number.isInteger(e),r="Таймаут (*)",a="???";return t?a="выкл":n&&(a="".concat(e," сек")),r.replace("*",a)}},activated:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=!1;case 1:if(t){e.next=17;break}e.prev=2,n=this.$refs.messagesContainer.$refs.content,r=n.scrollHeight-n.clientHeight+1,n.scrollTop=r,t=!0,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](2);case 11:return e.prev=11,e.next=14,new Promise((function(e){return setTimeout(e,50)}));case 14:return e.finish(11);case 15:e.next=1;break;case 17:case"end":return e.stop()}}),e,this,[[2,9,11,15]])})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("getTwitchController");case 2:return t=e.sent,this.twitch=t,this.initConf(),e.next=7,this.initChat();case 7:return e.next=9,this.verifyNotificationPermission();case 9:new Audio("data:audio/wav;base64,UklGRjIAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAAABmYWN0BAAAAAAAAABkYXRhAAAAAA==").play();case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{onResultClose:function(){this.$set(this,"resultMessages",[])},saveValueToLs:function(e,t){o["a"][e]=t},verifyNotificationPermission:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.conf.found.showNotification,!t){e.next=6;break}return e.next=4,Notification.requestPermission();case 4:n=e.sent,"granted"!==n&&(t=!1,this.conf.found.showNotification=!1,alert("Не могу показывать уведомления, так как они были запрещены браузером"));case 6:this.saveValueToLs("chat_found.showNotification",t);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),initConf:function(){var e=function(e,t){return null===o["a"][e]?t:o["a"][e]},t=this.conf,n=t.search,r=t.found;n.considerCase=e("chat_search.considerCase",!1),n.considerSpaces=e("chat_search.considerSpaces",!1),n.onlyEntireMessage=e("chat_search.onlyEntireMessage",!1),r.playSound=e("chat_found.playSound",!0),r.showNotification=e("chat_found.showNotification",!0),r.sendToChat=e("chat_found.sendToChat",!1),this.input.successNotificationTemplate=o["a"]["chat_found.successNotificationTemplate"],this.input.timeout=e("chat_found.timeout",0)},setNextTimeoutValue:function(){var e=this.input.timeout,t=this.timeout.values.findIndex((function(t){return t===e})),n=t+1===this.timeout.values.length,r=n?0:t+1,a=this.timeout.values[r];this.input.timeout=a,this.saveValueToLs("chat_found.timeout",a),clearTimeout(this.timeout.timer),this.timeout.isActive=!1,this.timeout.timer=null},initChat:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t="https://api.betterttv.net/3/cached/users/twitch/".concat(this.twitch.user.id),e.next=4,fetch(t);case 4:if(n=e.sent,200===n.status){e.next=10;break}return e.next=8,n.text();case 8:throw r=e.sent,new Error(r);case 10:return e.next=12,n.json();case 12:this.bttvCache=e.sent,e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),console.log("Can not fetch BTTV API:",e.t0),this.bttvCache=null;case 19:a=new u.a.Client({channels:[this.twitch.user.name],identity:{username:this.twitch.user.name,password:"oauth:".concat(this.twitch.user.token)}}),this.onSystemMessage("info","Установка подключения..."),a.connect().catch((function(e){s.onSystemMessage("error",e.message||e)})),a.on("connected",(function(e,t){s.onSystemMessage("info","Подключеие установлено")})),a.on("message",this.onMessage),this.chatClient=a;case 25:case"end":return e.stop()}}),e,this,[[0,15]])})));function t(){return e.apply(this,arguments)}return t}(),onSystemMessage:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={isSystemMessage:!0,color:"error"===t?"#F00":null,text:n,textProcessed:n},e.next=3,this.addMessage(r);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),onMessage:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var s,i,o,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=n["display-name"],i=new Date(+n["tmi-sent-ts"]),o="".concat(i.getHours().toString().padStart(2,"0"),":").concat(i.getMinutes().toString().padStart(2,"0")),c="".concat(o,":").concat(i.getSeconds().toString().padStart(2,"0")),e.t0={name:s,color:n.color||this.generateColorForString(s)},e.t1=r,e.next=8,this.processEmotes(r,n.emotes);case 8:return e.t2=e.sent,e.t3={raw:i,time:o,timeWithSeconds:c},u={user:e.t0,text:e.t1,textProcessed:e.t2,timestamp:e.t3,isHighlighed:!1},e.next=13,this.addMessage(u);case 13:return e.next=15,this.checkMessage(u,{channel:t,self:a});case 15:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}(),createFakeSuccessfulMessage:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=!this.input.confSearchQuery,t&&(this.input.confSearchQuery="Т Е С Т"),n="#".concat(this.twitch.user.name.toLowerCase()),r={"display-name":"System",color:"#F00","tmi-sent-ts":(new Date).valueOf()},a=this.input.confSearchQuery,s=!1,e.next=8,this.onMessage(n,r,a,s);case 8:t&&(this.input.confSearchQuery="");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkMessage:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,s,i,o,c,u,l,d,f,p,h,m,v,g,b,y,x=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.channel,a=n.self,!a){e.next=3;break}return e.abrupt("return");case 3:if(s=this.input.confSearchQuery,s){e.next=6;break}return e.abrupt("return");case 6:if(i=this.conf,o=i.search,c=i.found,u=t.text,l=!1,o.considerCase||(s=s.toLowerCase(),u=u.toLowerCase()),o.considerSpaces||(s=s.replace(/\s/g,""),u=u.replace(/\s/g,"")),l=o.onlyEntireMessage?u===s:u.includes(s),l){e.next=14;break}return e.abrupt("return");case 14:if(!this.timeout.isActive){e.next=16;break}return e.abrupt("return");case 16:return t.isHighlighed=!0,d=this.$refs.messagesContainer.$refs.content,f=d.clientHeight,this.resultMessages.push(t),e.next=22,this.$nextTick();case 22:if(p=d.clientHeight,h=f-p,d.scrollTop+=h,m=this.resultMessages.length>3,m&&this.resultMessages.splice(0,1),v=(this.input.successNotificationTemplate||this.defaultValues.successNotificationTemplate).replace("@","@".concat(t.user.name)).replace("*",t.text).replace("&",this.input.confSearchQuery),c.playSound)try{g=new Audio(this.defaultValues.notificationSound),g.play()}catch(w){alert("Не могу проиграть звук: ".concat(w.message))}if(c.showNotification)try{b=new Notification("Сообщение от @".concat(t.user.name),{body:v,icon:this.defaultValues.notificationIcon,silent:!0}),b.addEventListener("click",(function(e){e.target.close()}))}catch(w){alert("Не могу создать уведомление: ".concat(w.message))}if(c.sendToChat)try{this.chatClient.say(r,v)}catch(w){alert("Не могу отправить сообщение в чат: ".concat(w.message))}this.input.timeout&&(y=1e3*this.input.timeout,this.timeout.isActive=!0,this.timeout.timer=setTimeout((function(){x.timeout.isActive=!1,x.timeout.timer=null}),y));case 32:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),generateColorForString:function(e){var t=this.defaultValues.usernameColors,n=0,r=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var c=i.value;n+=c.charCodeAt(0)}}catch(l){a=!0,s=l}finally{try{r||null==o.return||o.return()}finally{if(a)throw s}}var u=n%t.length;return t[u]},processEmotes:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,c,u,l,d,f,p,h,m,v,g,b,y,x,w,k,_,C,$,T,S,R,O=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t,a=function(e,t){var n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");r=r.replace(new RegExp(n,"g"),"<img class='".concat(O.$style.emote,"' src='").concat(t,"'>"))},n)for(i="https://static-cdn.jtvnw.net/emoticons/v2/$$/default/dark/1.0",o=0,c=Object.entries(n);o<c.length;o++)u=Object(s["a"])(c[o],2),l=u[0],d=u[1],f=d[0].split("-"),p=Object(s["a"])(f,2),h=p[0],m=p[1],v=t.slice(+h,+m+1),g=i.replace("$$",l),a(v,g);if(!this.bttvCache){e.next=25;break}for(b="https://cdn.betterttv.net/emote/$$/1x",y=this.bttvCache.sharedEmotes,x=!0,w=!1,k=void 0,e.prev=9,_=y[Symbol.iterator]();!(x=(C=_.next()).done);x=!0)$=C.value,T=$.id,S=$.code,R=b.replace("$$",T),a(S,R);e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](9),w=!0,k=e.t0;case 17:e.prev=17,e.prev=18,x||null==_.return||_.return();case 20:if(e.prev=20,!w){e.next=23;break}throw k;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",r);case 26:case"end":return e.stop()}}),e,this,[[9,13,17,25],[18,,20,24]])})));function t(t,n){return e.apply(this,arguments)}return t}(),addMessage:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$refs.messagesContainer.$refs.content,r=60,a=n.scrollHeight-n.clientHeight+1,s=n.scrollTop,i=s>=a-r,this.messages.push(t),e.next=8,this.$nextTick();case 8:i&&(o=n.scrollHeight-n.clientHeight+1,n.scrollTop=o,c=this.messages.length>this.maxMessagesCount,c&&(this.messages=this.messages.slice(-1*this.maxMessagesCount)));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},d=l,f=n("8ed5"),p=n("2877");function h(e){this["$style"]=f["default"].locals||f["default"]}var m=Object(p["a"])(d,r,a,!1,h,null,null);t["default"]=m.exports},d903:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.container},[n("KeepAlive",[n(e.currentTab,{tag:"Component",class:e.$style.component})],1)],1)},a=[],s=(n("a481"),n("ac4d"),n("8a81"),n("ac6a"),n("a11e")),i={},o=!0,c=!1,u=void 0;try{for(var l,d=function(){var e=l.value,t=e.replace("./","").replace("/index.vue","");i[t]=function(){return n("3e54")("./".concat(t,"/index.vue"))}},f=s.keys()[Symbol.iterator]();!(o=(l=f.next()).done);o=!0)d()}catch(y){c=!0,u=y}finally{try{o||null==f.return||f.return()}finally{if(c)throw u}}var p={components:i,computed:{currentTab:function(){return this.$store.state.currentTab}}},h=p,m=n("87e0"),v=n("2877");function g(e){this["$style"]=m["default"].locals||m["default"]}var b=Object(v["a"])(h,r,a,!1,g,null,null);t["default"]=b.exports},dc8c:function(e,t,n){e.exports={container:"header_container_3xbMC",tab:"header_tab_cKG2y",active:"header_active_1Uw4l",locked:"header_locked_Hxd5i"}},dd69:function(e,t,n){e.exports={container:"index_container_36v57",mainContainer:"index_mainContainer_1yF4W",hasResult:"index_hasResult_2fosU",sidebarContainer:"index_sidebarContainer_2Ep6C",messagesContainer:"index_messagesContainer_3aDQz",message:"index_message_kAaSv",systemMessage:"index_systemMessage_3qu7c",highlight:"index_highlight_2H8Ox",time:"index_time_2Hr3O",user:"index_user_2bHb3",text:"index_text_3X4vz",emote:"index_emote_1wvs-",searchContainer:"index_searchContainer_3pw7h",confFoundContainer:"index_confFoundContainer_1XhST",input:"index_input_uZqbW",buttonsWrapper:"index_buttonsWrapper_3PCgP"}},de27:function(e,t,n){"use strict";n.r(t);var r=function(){var e,t=this,n=t.$createElement,r=t._self._c||n;return r("div",t._g(t._b({ref:"root",class:t.$style.container},"div",t.$attrs,!1),t.$listeners),[r("div",{ref:"caption",class:[t.$style.caption,(e={},e[t.$style.hasCloseButton]=t.canBeClosed,e)]},[r("span",{domProps:{textContent:t._s(t.caption)}}),t.canBeClosed?r("span",{class:t.$style.closeBtn,domProps:{textContent:t._s("×")},on:{click:function(e){return t.$emit("onClose")}}}):t._e()]),r("div",{ref:"content",class:[t.$style.content,t.innerClass]},[t._t("default")],2)])},a=[],s={props:{innerClass:{type:[Object,Array,String],default:null},caption:{type:String,default:null},canBeClosed:{type:Boolean,default:!1}}},i=s,o=n("62fb"),c=n("2877");function u(e){this["$style"]=o["default"].locals||o["default"]}var l=Object(c["a"])(i,r,a,!1,u,null,null);t["default"]=l.exports},e098:function(e,t,n){"use strict";var r=n("2b41"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},e24a:function(e,t,n){"use strict";var r=n("8987"),a=n.n(r);n.d(t,"default",(function(){return a.a}))},f09b:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("gButton",{attrs:{caption:e.buttonCaption},on:{click:e.copyFromTarget}})},a=[],s={props:{target:{type:Function,required:!0},caption:{type:String,default:null}},components:{gButton:function(){return Promise.resolve().then(n.bind(null,"32d9"))}},data:function(){return{buttonCaption:""}},mounted:function(){this.setCopyButtonText("copy")},methods:{setCopyButtonText:function(e){var t;switch(e){case"copy":t=this.caption||"Копировать";break;case"copied":t="Скопировано!";break;case"error":t="Не удалось скопировать";break}this.buttonCaption=t},copyFromTarget:function(){var e=this,t=this.target();t._isVue&&(t=t.$el);var n=t.disabled;n&&(t.disabled=!1),t.focus(),t.select();var r=document.execCommand("copy");window.getSelection&&(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()),n&&(t.disabled=!0),r?(this.setCopyButtonText("copied"),setTimeout((function(){e.setCopyButtonText("copy")}),750)):this.setCopyButtonText("error")}}},i=s,o=n("2877"),c=Object(o["a"])(i,r,a,!1,null,null,null);t["default"]=c.exports},f613:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.container},e._l(e.tabs,(function(t,r){var a;return n("button",{key:r,class:[e.$style.tab,(a={},a[e.$style.active]=e.tab===t.tab,a[e.$style.locked]=!e.$store.state.isAuthenticated&&"auth"!==t.tab,a)],domProps:{textContent:e._s(t.name)},on:{click:function(n){return e.selectTab(t.tab)}}})})),0)},a=[],s={data:function(){return{tabs:[{tab:"auth",name:"Авторизация"},{tab:"subs",name:"Подписчики"},{tab:"rewards",name:"Награды"},{tab:"chat",name:"Чат"},{tab:"randomizer",name:"Рандомайзер"}]}},computed:{tab:function(){return this.$store.state.currentTab}},methods:{selectTab:function(e){this.$store.dispatch("selectTab",e)}}},i=s,o=n("a5ae"),c=n("2877");function u(e){this["$style"]=o["default"].locals||o["default"]}var l=Object(c["a"])(i,r,a,!1,u,null,null);t["default"]=l.exports},f663:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:e.$style.container},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{click:function(t){return e.updateValue(e.$refs.checkbox.checked)},change:function(t){var n=e.value,r=t.target,a=!!r.checked;if(Array.isArray(n)){var s=null,i=e._i(n,s);r.checked?i<0&&(e.value=n.concat([s])):i>-1&&(e.value=n.slice(0,i).concat(n.slice(i+1)))}else e.value=a}}}),e._v(" Анимированный фон ")])},a=[],s=n("a79e"),i={props:{value:{type:Boolean,retuired:!0}},mounted:function(){var e="boolean"!==typeof s["a"].isBackgroundAnimated||s["a"].isBackgroundAnimated;this.updateValue(e)},methods:{updateValue:function(e){var t="undefined"===typeof e?this.$refs.checkbox.checked:e;s["a"].isBackgroundAnimated=t,this.$emit("input",t)}}},o=i,c=n("2779"),u=n("2877");function l(e){this["$style"]=c["default"].locals||c["default"]}var d=Object(u["a"])(o,r,a,!1,l,null,null);t["default"]=d.exports},f913:function(e,t,n){"use strict";var r=n("955a"),a=n.n(r);n.d(t,"default",(function(){return a.a}))}});